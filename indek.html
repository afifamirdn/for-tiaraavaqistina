<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HAI TIARAüí´</title>
  <style>
    :root {
      --bg1: #0f1724; --bg2:#3b0d47;
      --accent:#ff6b9f; --accent-2:#ffd166;
      --text:#fff; --muted:#f3e8ff;
      font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      min-height:100vh; display:flex; align-items:center; justify-content:center;
      background:linear-gradient(135deg,var(--bg1),var(--bg2)); color:var(--text);
      overflow:hidden; padding:1rem;
    }

    .screen{position:absolute; inset:0; display:flex; align-items:center; justify-content:center; flex-direction:column; text-align:center; transition:opacity .5s ease, transform .5s ease}
    .hidden{opacity:0; pointer-events:none; transform:scale(.98)}
    h1{font-size:clamp(1.6rem,6vw,3rem)}
    p{color:var(--muted); margin-top:.6rem}
    .cta{margin-top:1.2rem}
    .big-btn{background:linear-gradient(90deg,var(--accent),#ff8fb1); color:#20071a; border:none; padding:.9rem 1.8rem; border-radius:999px; font-weight:700; font-size:1.05rem; cursor:pointer; box-shadow:0 8px 30px rgba(255,107,159,.18)}
    .big-btn:active{transform:translateY(2px)}

    .card{
      width:100%; max-width:760px; padding:2rem; border-radius:18px;
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.06));
      box-shadow: 0 20px 60px rgba(2,6,23,0.6);
      text-align:center; backdrop-filter: blur(6px);
    }
    .message{font-size:1.05rem; color:var(--muted); margin-top:.6rem}
    .name{font-weight:800; font-size:1.6rem; margin-top:.6rem}

    .actions{display:flex; gap:1rem; justify-content:center; margin-top:1.2rem; flex-wrap:wrap}
    .btn{padding:.6rem 1.1rem; border-radius:12px; font-weight:700; cursor:pointer; border:none}
    .yes{background:linear-gradient(90deg,#fff176,#ff6b9f); color:#2b0218}
    .no{background:transparent; border:2px solid rgba(255,255,255,0.12); color:var(--text)}
    .no.runaway{position:relative; transition:transform .25s ease}

    .hearts{position:fixed; inset:0; pointer-events:none; overflow:hidden}
    .heart{position:absolute; font-size:22px; will-change:transform,opacity; animation:fall linear; opacity:.95}
    @keyframes fall{0%{transform:translateY(-10vh) rotate(0deg); opacity:1}100%{transform:translateY(110vh) rotate(360deg); opacity:0}}

    #confetti{position:fixed; inset:0; pointer-events:none}
    footer{position:fixed; bottom:10px; width:100%; text-align:center; color:rgba(255,255,255,0.6); font-size:.85rem}

    @media (max-width:640px){
      .card{padding:1.25rem; border-radius:14px}
      .name{font-size:1.3rem}
      .actions{gap:.6rem}
      .big-btn{padding:.8rem 1.2rem}
    }
  </style>
</head>
<body>

  <div class="hearts" id="hearts"></div>
  <canvas id="confetti"></canvas>

  <!-- START -->
  <section class="screen" id="start-screen">
    <div>
      <h1>TIARA SAKILAüí´</h1>
      <p>Sentuh atau klik untuk membuka pesan</p>
      <div class="cta"><button class="big-btn" id="start-btn">Mulai ‚ù§Ô∏è</button></div>
    </div>
  </section>

  <!-- MAIN -->
  <main class="screen hidden" id="main-screen">
    <div class="card">
      <div class="name" id="recipient">Untukmu TIARA SAKILAüíñ</div>
      <p class="message" id="message">Hai, ini halaman kecil buat kamu yang spesial banget, disini aku mau ngomong kalo aku udah suka kamu dari lama, dan aku pengen kita jadi lebih dari temen, apakah kamu mau??.</p>
      <div class="actions">
        <button class="btn yes" id="yes-btn">Iyaaa üíñ</button>
        <button class="btn no" id="no-btn">Nggak</button>
      </div>
    </div>
  </main>

  <footer>¬© <span id="year"></span> ‚Äî Dibuat dengan hati üíå</footer>

  <!-- pastikan file mp3 ini ada di folder yang sama -->
  <audio id="bg-music" loop preload="none">
   <audio id="bg-music" loop preload="auto" src="about_you_1975_tiara.mp3"></audio>

  </audio>

  <script>
    const qs = s => document.querySelector(s);
    const startBtn = qs('#start-btn');
    const startScreen = qs('#start-screen');
    const mainScreen = qs('#main-screen');
    const yesBtn = qs('#yes-btn');
    const noBtn = qs('#no-btn');
    const heartsLayer = qs('#hearts');
    const confettiCanvas = qs('#confetti');
    const music = qs('#bg-music');
    const yearEl = qs('#year'); yearEl.textContent = new Date().getFullYear();

    // fix autoplay issue: user interaction required
    let musicAllowed = false;
    function playMusicOnceAllowed() {
      if (!musicAllowed) return;
      music.volume = 0.6;
      music.play().catch(() => {
        console.warn("Autoplay masih diblokir");
      });
    }

    startBtn.addEventListener('click', ()=>{
      musicAllowed = true;
      playMusicOnceAllowed();
      startScreen.classList.add('hidden');
      mainScreen.classList.remove('hidden');
      spawnHearts(12);
      playConfetti(2000);
    });

    yesBtn.addEventListener('click', ()=>{
      yesBtn.disabled = true;
      qs('#message').textContent = "Selamat! Kamu berhasil bikin dia senyum üíû";
      playConfetti(3000);
      spawnHearts(40);
    });

    noBtn.addEventListener('mouseover', ()=>{
      const parentRect = noBtn.parentElement.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();
      const maxX = parentRect.width - btnRect.width;
      const maxY = parentRect.height - btnRect.height;
      const x = Math.random() * Math.max(0,maxX);
      const y = Math.random() * Math.max(0,maxY);
      noBtn.style.transform = `translate(${x}px, ${y}px)`;
    });

    function spawnHearts(n){
      for(let i=0;i<n;i++){
        const el = document.createElement('div');
        el.className='heart'; el.textContent = '‚ù§';
        const size = 12 + Math.random()*36; el.style.fontSize = size+'px';
        el.style.left = (Math.random()*100)+'%';
        el.style.animationDuration = (4 + Math.random()*6)+'s';
        el.style.opacity = (0.6 + Math.random()*0.4);
        heartsLayer.appendChild(el);
        setTimeout(()=>el.remove(), 11000);
      }
    }

    function playConfetti(duration=1500){
      const canvas = confettiCanvas; const ctx = canvas.getContext('2d');
      let w = canvas.width = innerWidth; let h = canvas.height = innerHeight;
      const pieces = [];
      const colors = ['#FFD166','#EF476F','#06D6A0','#118AB2','#FDFFB6'];
      for(let i=0;i<120;i++){
        pieces.push({x:Math.random()*w, y:Math.random()*-h, vx:(Math.random()-0.5)*6, vy:2+Math.random()*6, r:Math.random()*8+2, c: colors[Math.floor(Math.random()*colors.length)], rot:Math.random()*360});
      }
      let start = null;
      function frame(ts){
        if(!start) start = ts; const elapsed = ts-start;
        ctx.clearRect(0,0,w,h);
        for(const p of pieces){
          p.x += p.vx; p.y += p.vy; p.rot += p.vx*2;
          ctx.save(); ctx.translate(p.x,p.y); ctx.rotate(p.rot*Math.PI/180);
          ctx.fillStyle = p.c; ctx.fillRect(-p.r/2, -p.r/2, p.r, p.r*0.6);
          ctx.restore();
        }
        if(elapsed < duration) requestAnimationFrame(frame); else ctx.clearRect(0,0,w,h);
      }
      requestAnimationFrame(frame);
    }

    document.addEventListener('keydown', (e)=>{
      if(e.key==='Enter' && !mainScreen.classList.contains('hidden')) yesBtn.click();
      if(e.key==='Enter' && !startScreen.classList.contains('hidden')) startBtn.click();
    });
  </script>
</body>
</html>


